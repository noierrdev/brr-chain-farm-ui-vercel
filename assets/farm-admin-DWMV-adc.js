import{r as t,j as e,R}from"./index-C-zGdAev.js";import{x as M,z as p,H as _,A as T,G as f,I as w,J as N,M as b,N as j,S as E,D as c,E as D,K as L,L as H}from"./TitlePanel-BA8Mg6k9.js";var z=M("plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);const F="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%200C18.6271%200%2024%205.37288%2024%2012C24%2018.6271%2018.6269%2024%2012%2024C5.37312%2024%200%2018.6286%200%2012C0%205.37144%205.37216%200%2012%200Z'%20fill='%2323C1AA'/%3e%3cpath%20d='M10.79%2014.55H12.89V14.355C12.89%2013.925%2013.01%2013.55%2013.25%2013.23C13.49%2012.91%2013.765%2012.605%2014.075%2012.315C14.315%2012.085%2014.545%2011.85%2014.765%2011.61C14.985%2011.36%2015.165%2011.09%2015.305%2010.8C15.455%2010.5%2015.53%2010.16%2015.53%209.78C15.53%209.25%2015.395%208.75%2015.125%208.28C14.855%207.8%2014.45%207.41%2013.91%207.11C13.38%206.8%2012.725%206.645%2011.945%206.645C11.305%206.645%2010.725%206.765%2010.205%207.005C9.69504%207.245%209.27504%207.575%208.94504%207.995C8.62504%208.415%208.42004%208.905%208.33004%209.465L10.415%209.99C10.475%209.61%2010.64%209.31%2010.91%209.09C11.19%208.86%2011.515%208.745%2011.885%208.745C12.315%208.745%2012.64%208.85%2012.86%209.06C13.09%209.26%2013.205%209.52%2013.205%209.84C13.205%2010.15%2013.09%2010.425%2012.86%2010.665C12.63%2010.895%2012.37%2011.155%2012.08%2011.445C11.77%2011.765%2011.475%2012.14%2011.195%2012.57C10.925%2013%2010.79%2013.545%2010.79%2014.205V14.55ZM10.73%2018H12.98V15.75H10.73V18Z'%20fill='white'/%3e%3c/svg%3e",Z=()=>{const{allPools:s,getProgramAccount:v,user_token_accounts:k,initialize_pool:o,charge_reward:x}=p(),[i,m]=t.useState(""),r=a=>{m(a.target.value)},[n,h]=t.useState(""),d=a=>{h(a.target.value)},u=()=>{i&&n&&o.mutateAsync({stakingMintStr:i,rewardAMintStr:n})};return e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsx(T,{}),e.jsxs("div",{className:"mb-5 -mt-[30px]",children:[e.jsx("div",{className:"mb-5 w-full px-[15%] ",children:e.jsxs(f,{children:[e.jsxs(w,{expandIcon:e.jsx(N,{}),sx:{paddingX:5,paddingY:1.5,display:"flex",alignItems:"center"},children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:F,className:""})}),e.jsx("div",{className:"flex-grow flex justify-start px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{}),e.jsx("p",{className:"text-lg float-left font-semibold",children:"New Pool"})]})})]}),e.jsxs(b,{sx:{paddingX:5},children:[e.jsxs("div",{className:"w-full grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-md w-1/2",children:"LP token address:"}),e.jsx(j,{fullWidth:!0,margin:"normal",size:"small",onChange:r})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-md w-1/2",children:"Reward token address:"}),e.jsx(j,{fullWidth:!0,margin:"normal",size:"small",onChange:d})]})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{disabled:!1,type:"submit",onClick:a=>u(),className:" w-1/2 mt-6 w-full rounded-lg bg-[blue] p-5   hover:shadow-xl hover:bg-[blue]/50  shadow-lg",children:e.jsx("span",{className:"font-semibold text-[white]/80",children:"Create a pool"})})})]})]})}),s.isLoading?e.jsxs(E,{spacing:2,justifyContent:"center",alignItems:"center",children:[e.jsx(c,{variant:"rounded",sx:{width:"70%",height:"120px"}}),e.jsx(c,{variant:"rounded",sx:{width:"70%",height:"120px"}}),e.jsx(c,{variant:"rounded",sx:{width:"70%",height:"120px"}}),e.jsx(c,{variant:"rounded",sx:{width:"70%",height:"120px"}}),e.jsx(c,{variant:"rounded",sx:{width:"70%",height:"120px"}}),e.jsx(c,{variant:"rounded",sx:{width:"70%",height:"120px"}})]}):s.data.map((a,g)=>e.jsx(K,{pool:a},g))]})]})},K=({pool:s,tokenAccount:v})=>{R.useState("1");const{deposit:k,token_balance:o,user_staked:x,withdraw:i,claim:m,charge_reward:r}=p(),{userPda:n}=D({pool:s});t.useRef(null),t.useRef(null),t.useState(0);const[h,d]=t.useState(0),[u,a]=t.useState(null);t.useState(null);const[g,C]=t.useState(0),[S,U]=t.useState(9),y=()=>{r.mutateAsync({pool:s.publicKey})};return t.useEffect(()=>{n.isLoading||a(n.data)},[n]),t.useEffect(()=>{s&&x.mutateAsync({pool:s.publicKey}).then(l=>{if(l){const A=s.account.lastUpdateTime.toNumber(),I=Date.now()/1e3-A,P=21e5*(l==null?void 0:l.balanceStaked.toNumber())*I/(365*86400*s.account.totalStaked.toNumber());C(P),d(Number(l==null?void 0:l.balanceStaked)/10**S)}})},[s]),e.jsx("div",{className:"mb-5 w-full px-[15%] ",children:e.jsxs(f,{className:"shadow-xl",children:[e.jsxs(w,{expandIcon:e.jsx(N,{}),sx:{paddingX:5,paddingY:1.5},children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:L,className:"w-1/7"})}),e.jsxs("div",{className:"flex-grow flex flex-col justify-start px-4",children:[e.jsx("div",{children:e.jsx("p",{className:"text-lg float-left font-semibold",children:"SOL-BONK"})}),e.jsxs("div",{className:"rounded-full flex items-center bg-[black]/10 w-[10%]  px-[5px]",children:[e.jsx("div",{className:"w-4/5  overflow-hidden",children:e.jsx("p",{className:"text-[8px] text-[black]/50 float-left ",children:s&&s.account.stakingMint.toString()})}),e.jsx(H,{className:"text-[black]/50 w-1/5"})]})]}),e.jsxs("div",{className:"flex flex-col items-center px-4",children:[e.jsx("p",{className:"text-[black]/50 text-sm",children:"Remaining reward"}),e.jsx("p",{className:"font-semibold",children:s.account.totalReward.toNumber()})]}),e.jsxs("div",{className:"flex flex-col items-center px-4",children:[e.jsx("p",{className:"text-[black]/50 text-sm",children:"Total staked"}),e.jsx("p",{className:"font-semibold",children:"-"})]}),e.jsxs("div",{className:"flex flex-col items-center px-4",children:[e.jsx("p",{className:"text-[black]/50 text-sm",children:"APY"}),e.jsx("p",{className:"font-semibold",children:"<0.01%"})]})]}),e.jsx(b,{sx:{paddingX:5},children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("button",{onClick:l=>y(),disabled:!1,type:"submit",className:" w-1/2 mt-6 rounded-lg bg-[green] p-5   hover:shadow-xl hover:bg-[green]/50  shadow-lg",children:e.jsx("span",{className:"font-semibold text-[white]/80",children:"Charge reward token"})})}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("button",{disabled:!1,type:"submit",className:" w-1/2 mt-6 rounded-lg bg-[red] p-5   hover:shadow-xl hover:bg-[pink]/50  shadow-lg",children:e.jsx("span",{className:"font-semibold text-[white]/80",children:"Close pool"})})})]})})]})})};export{Z as default};
