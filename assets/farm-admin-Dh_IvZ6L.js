import{r as t,j as e,R as A}from"./index-B-mGOsQ3.js";import{z as p,H as R,A as P,N as j,S as C,D as c,E as I,G as _,I as T,J as E,K as M,L as D,M as L}from"./TitlePanel-DA2x2MSa.js";const O=()=>{const{allPools:s,getProgramAccount:f,user_token_accounts:w,initialize_pool:o,charge_reward:x}=p(),[i,m]=t.useState(""),r=a=>{m(a.target.value)},[l,u]=t.useState(""),d=a=>{u(a.target.value)},h=()=>{i&&l&&o.mutateAsync({stakingMintStr:i,rewardAMintStr:l})};return e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsx(P,{}),e.jsxs("div",{className:"mb-5 -mt-[30px]",children:[e.jsx("div",{className:"mb-5 w-full px-[15%] ",children:e.jsxs("div",{className:"rounded shadow-md bg-white w-full h-100 px-[5%] py-5",children:[e.jsxs("div",{className:"w-full grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-md w-1/2",children:"LP token address:"}),e.jsx(j,{fullWidth:!0,margin:"normal",size:"small",onChange:r})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-md w-1/2",children:"Reward token address:"}),e.jsx(j,{fullWidth:!0,margin:"normal",size:"small",onChange:d})]})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{disabled:!1,type:"submit",onClick:a=>h(),className:" w-1/2 mt-6 w-full rounded-lg bg-[blue] p-5   hover:shadow-xl hover:bg-[blue]/50  shadow-lg",children:e.jsx("span",{className:"font-semibold text-[white]/80",children:"Create a pool"})})})]})}),s.isLoading?e.jsxs(C,{spacing:2,justifyContent:"center",alignItems:"center",children:[e.jsx(c,{variant:"rounded",sx:{width:"70%",height:"120px"}}),e.jsx(c,{variant:"rounded",sx:{width:"70%",height:"120px"}}),e.jsx(c,{variant:"rounded",sx:{width:"70%",height:"120px"}}),e.jsx(c,{variant:"rounded",sx:{width:"70%",height:"120px"}}),e.jsx(c,{variant:"rounded",sx:{width:"70%",height:"120px"}}),e.jsx(c,{variant:"rounded",sx:{width:"70%",height:"120px"}})]}):s.data.map((a,g)=>e.jsx(z,{pool:a},g))]})]})},z=({pool:s,tokenAccount:f})=>{A.useState("1");const{deposit:w,token_balance:o,user_staked:x,withdraw:i,claim:m,charge_reward:r}=p(),{userPda:l}=I({pool:s});t.useRef(null),t.useRef(null),t.useState(0);const[u,d]=t.useState(0),[h,a]=t.useState(null);t.useState(null);const[g,b]=t.useState(0),[N,F]=t.useState(9),v=()=>{r.mutateAsync({pool:s.publicKey})};return t.useEffect(()=>{l.isLoading||a(l.data)},[l]),t.useEffect(()=>{s&&x.mutateAsync({pool:s.publicKey}).then(n=>{if(n){const k=s.account.lastUpdateTime.toNumber(),S=Date.now()/1e3-k,y=21e5*(n==null?void 0:n.balanceStaked.toNumber())*S/(365*86400*s.account.totalStaked.toNumber());b(y),d(Number(n==null?void 0:n.balanceStaked)/10**N)}})},[s]),e.jsx("div",{className:"mb-5 w-full px-[15%] ",children:e.jsxs(_,{className:"shadow-xl",children:[e.jsxs(T,{expandIcon:e.jsx(E,{}),sx:{paddingX:5,paddingY:1.5},children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:M,className:"w-1/7"})}),e.jsxs("div",{className:"flex-grow flex flex-col justify-start px-4",children:[e.jsx("div",{children:e.jsx("p",{className:"text-lg float-left font-semibold",children:"SOL-BONK"})}),e.jsxs("div",{className:"rounded-full flex items-center bg-[black]/10 w-[10%]  px-[5px]",children:[e.jsx("div",{className:"w-4/5  overflow-hidden",children:e.jsx("p",{className:"text-[8px] text-[black]/50 float-left ",children:s&&s.account.stakingMint.toString()})}),e.jsx(D,{className:"text-[black]/50 w-1/5"})]})]}),e.jsxs("div",{className:"flex flex-col items-center px-4",children:[e.jsx("p",{className:"text-[black]/50 text-sm",children:"Remaining reward"}),e.jsx("p",{className:"font-semibold",children:s.account.totalReward.toNumber()})]}),e.jsxs("div",{className:"flex flex-col items-center px-4",children:[e.jsx("p",{className:"text-[black]/50 text-sm",children:"Total staked"}),e.jsx("p",{className:"font-semibold",children:"-"})]}),e.jsxs("div",{className:"flex flex-col items-center px-4",children:[e.jsx("p",{className:"text-[black]/50 text-sm",children:"APY"}),e.jsx("p",{className:"font-semibold",children:"<0.01%"})]})]}),e.jsx(L,{sx:{paddingX:5},children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("button",{onClick:n=>v(),disabled:!1,type:"submit",className:" w-1/2 mt-6 rounded-lg bg-[green] p-5   hover:shadow-xl hover:bg-[green]/50  shadow-lg",children:e.jsx("span",{className:"font-semibold text-[white]/80",children:"Charge reward token"})})}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("button",{disabled:!1,type:"submit",className:" w-1/2 mt-6 rounded-lg bg-[red] p-5   hover:shadow-xl hover:bg-[pink]/50  shadow-lg",children:e.jsx("span",{className:"font-semibold text-[white]/80",children:"Close pool"})})})]})})]})})};export{O as default};
